<!DOCTYPE html>
<html>
<head>
  <title>3D Network Graph with Plotly</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
  <h2>3D Node-Link Graph</h2>
  <div id="network-3d" style="width: 100%; height: 700px;"></div>

  <script>
    // Define edge list
    const edges = [
      [0, 1], [1, 2], [2, 3], [3, 0],
      [1, 4], [4, 5], [5, 2]
    ];

    const numNodes = 6;

    // Generate 3D positions in a sphere-like layout
    const positions = [];
    for (let i = 0; i < numNodes; i++) {
      const theta = Math.acos(2 * Math.random() - 1);
      const phi = 2 * Math.PI * Math.random();
      const x = Math.sin(theta) * Math.cos(phi);
      const y = Math.sin(theta) * Math.sin(phi);
      const z = Math.cos(theta);
      positions.push([x, y, z]);
    }

    // Prepare edge lines in 3D
    const edgeX = [];
    const edgeY = [];
    const edgeZ = [];
    edges.forEach(([src, dst]) => {
      const [x0, y0, z0] = positions[src];
      const [x1, y1, z1] = positions[dst];
      edgeX.push(x0, x1, null);
      edgeY.push(y0, y1, null);
      edgeZ.push(z0, z1, null);
    });

    const edgeTrace = {
      type: 'scatter3d',
      mode: 'lines',
      x: edgeX,
      y: edgeY,
      z: edgeZ,
      line: {
        width: 2,
        color: '#888'
      },
      hoverinfo: 'none'
    };

    // Prepare node markers
    const nodeX = positions.map(p => p[0]);
    const nodeY = positions.map(p => p[1]);
    const nodeZ = positions.map(p => p[2]);

    const nodeTrace = {
      type: 'scatter3d',
      mode: 'markers+text',
      x: nodeX,
      y: nodeY,
      z: nodeZ,
      text: [...Array(numNodes).keys()].map(i => `Node ${i}`),
      textposition: 'top center',
      hoverinfo: 'text',
      marker: {
        size: 6,
        color: '#1f77b4',
        line: {
          color: '#fff',
          width: 1
        }
      }
    };

    Plotly.newPlot('network-3d', [edgeTrace, nodeTrace], {
      title: '3D Network Graph',
      scene: {
        xaxis: { visible: false },
        yaxis: { visible: false },
        zaxis: { visible: false }
      },
      margin: { t: 30, l: 0, r: 0, b: 0 },
      showlegend: false
    });
  </script>
</body>
</html>
